{"ast":null,"code":"var _jsxFileName = \"/Users/colin/Desktop/next/fitness-kaki-front-end/src/pages/EventFeed.js\";\nimport React from 'react';\nimport { Button, Row, Col, CardBody, CardSubtitle, Container, CardText, CardTitle, Progress } from 'reactstrap';\nimport axios from 'axios';\nimport Loader from '../images/loader.gif';\nimport { Link } from \"react-router-dom\";\n\nclass EventFeed extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.refreshFeed = () => {\n      axios.get('http://localhost:5000/api/v1/events/').then(response => {\n        console.log(this.state.eventsList);\n        console.log(response.data);\n        let tempEventList = response.data;\n        this.setState({\n          eventsList: tempEventList,\n          isLoading: false,\n          update: true\n        });\n      }).catch(error => {\n        console.log('ERROR: ', error);\n      });\n    };\n\n    this.handleJoin = e => {\n      //make an api call to guestlist and add or delete current user to guest list\n      let event_id = e.target.id;\n      let JWT = localStorage.getItem('userToken');\n      axios.post('http://localhost:5000/api/v1/guestlists/', {\n        event_id: event_id\n      }, {\n        headers: {\n          Authorization: \"Bearer \".concat(JWT)\n        }\n      }).then(response => {\n        console.log(response);\n        this.refreshFeed();\n      }).catch(error => {\n        console.log(\"ERROR in request: \", error);\n      });\n    };\n\n    this.state = {\n      message: true,\n      eventsList: [],\n      isLoading: true,\n      eventsJoined: 0\n    };\n  } //retrieve all events via axios\n\n\n  componentDidMount() {\n    axios.get('http://localhost:5000/api/v1/events/').then(response => {\n      let tempEventList = response.data;\n      this.setState({\n        eventsList: tempEventList,\n        isLoading: false\n      });\n    }).catch(error => {\n      console.log('ERROR: ', error);\n    });\n  }\n\n  componentDidUpdate(prevState, nextState, snapshot) {\n    this.refreshFeed();\n  } //join or leave an event\n\n\n  render() {\n    const _this$state = this.state,\n          eventsList = _this$state.eventsList,\n          isLoading = _this$state.isLoading;\n    console.log(\"isLoading is \".concat(isLoading));\n    console.log('render is being called');\n    console.log(this.props.current_user.id);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Events Near You\"), React.createElement(\"h4\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Don't see a fitness meet you like? How about \", React.createElement(Link, {\n      to: '/events/create',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"creating your own\"), \"?\"), isLoading ? React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"d-flex align-items-center justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: Loader,\n      alt: \"Loading event feed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }))) : eventsList.map(eventInList => {\n      return React.createElement(Container, {\n        key: eventInList.id,\n        className: \"my-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Row, {\n        md: \"10\",\n        className: \"d-flex align-items-center rounded bg-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"4\",\n        className: \" d-flex justify-content-center align-item-center rounded\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        width: \"200px\",\n        height: \"200px\",\n        className: \"border border-white m-3 rounded justify-content-center\",\n        src: eventInList.image,\n        alt: \"event image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: \"8\",\n        className: \"rounded\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(CardBody, {\n        className: \"p-1 text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(CardTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, eventInList.name)), React.createElement(CardSubtitle, {\n        className: \"text-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, eventInList.time), React.createElement(CardText, {\n        className: \"text-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Host : \", eventInList.host.username), React.createElement(CardText, {\n        className: \"text-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Location:\", eventInList.location, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), \"What to expect:\", eventInList.description), React.createElement(CardText, {\n        className: \"text-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Capacity: \", eventInList.guests.length, \"/\", eventInList.max_number), React.createElement(Row, {\n        className: \"align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Progress, {\n        color: \"success\",\n        value: Math.floor(eventInList.guests.length / eventInList.max_number * 100),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, eventInList.guests.includes(this.props.current_user.id) ? React.createElement(Button, {\n        id: eventInList.id,\n        color: \"danger\",\n        onClick: this.handleJoin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Leave\") : React.createElement(Button, {\n        id: eventInList.id,\n        color: \"success\",\n        onClick: this.handleJoin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Join\")))))));\n    })));\n  }\n\n}\n\nexport default EventFeed;","map":{"version":3,"sources":["/Users/colin/Desktop/next/fitness-kaki-front-end/src/pages/EventFeed.js"],"names":["React","Button","Row","Col","CardBody","CardSubtitle","Container","CardText","CardTitle","Progress","axios","Loader","Link","EventFeed","Component","constructor","props","refreshFeed","get","then","response","console","log","state","eventsList","data","tempEventList","setState","isLoading","update","catch","error","handleJoin","e","event_id","target","id","JWT","localStorage","getItem","post","headers","Authorization","message","eventsJoined","componentDidMount","componentDidUpdate","prevState","nextState","snapshot","render","current_user","map","eventInList","image","name","time","host","username","location","description","guests","length","max_number","Math","floor","includes"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Button,\n  Row,\n  Col,\n  CardBody,\n  CardSubtitle,\n  Container,\n  CardText,\n  CardTitle,\n  Progress,\n} from 'reactstrap';\nimport axios from 'axios';\nimport Loader from '../images/loader.gif';\nimport { Link } from \"react-router-dom\";\n\nclass EventFeed extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: true,\n      eventsList: [],\n      isLoading: true,\n      eventsJoined:0\n    }\n  }\n\n  //retrieve all events via axios\n  componentDidMount() {\n    axios.get('http://localhost:5000/api/v1/events/')\n      .then(response => {\n          let tempEventList = response.data;\n          this.setState({ eventsList: tempEventList, isLoading: false })\n      })\n      .catch(error => {\n        console.log('ERROR: ', error);\n      })\n  }\n\n  refreshFeed = () =>{\n    axios.get('http://localhost:5000/api/v1/events/')\n      .then(response => {\n          console.log(this.state.eventsList)\n          console.log(response.data)\n          let tempEventList = response.data;\n          this.setState({ eventsList: tempEventList, isLoading: false, update:true })\n        }\n      )\n      .catch(error => {\n        console.log('ERROR: ', error);\n      })\n  }\n\n  componentDidUpdate(prevState, nextState,snapshot){\n      this.refreshFeed();\n  }\n\n  //join or leave an event\n  handleJoin = e =>{\n    //make an api call to guestlist and add or delete current user to guest list\n    let event_id = e.target.id\n    let JWT = localStorage.getItem('userToken')\n    axios.post('http://localhost:5000/api/v1/guestlists/',\n    {event_id:event_id},\n      {\n        headers:{\n            Authorization: `Bearer ${JWT}`\n            }\n      }\n    ).then(response => {\n      console.log(response);\n      this.refreshFeed();\n  }).catch(error => {\n      console.log(\"ERROR in request: \", error)\n  })\n}\n\n  render() {\n    const { eventsList, isLoading } = this.state;\n    console.log(`isLoading is ${isLoading}`)\n    console.log('render is being called')\n    console.log(this.props.current_user.id)\n    return (\n      <div>\n        <div>\n          <h1>Events Near You</h1>\n          <h4 className=\"text-center\">Don't see a fitness meet you like? How about <Link to={'/events/create'}>creating your own</Link>?</h4>\n          {isLoading?\n            <Container>\n              <Row className=\"d-flex align-items-center justify-content-center\">\n                <img src={Loader} alt=\"Loading event feed\" />\n              </Row>\n            </Container>\n            :\n\n            eventsList.map((eventInList) => {\n              return (\n                <Container key={eventInList.id} className=\"my-2\">\n                    <Row md=\"10\" className=\"d-flex align-items-center rounded bg-info\">\n                      <Col md=\"4\" className=\" d-flex justify-content-center align-item-center rounded\">\n                        <img width=\"200px\" height=\"200px\" className=\"border border-white m-3 rounded justify-content-center\" src={eventInList.image} alt=\"event image\" />\n                      </Col>\n                       <Col md=\"8\" className=\"rounded\">\n                        <CardBody className=\"p-1 text-left\">\n                          <CardTitle><h3 className='text-light'>{eventInList.name}</h3></CardTitle>\n                          <CardSubtitle className='text-light'>{eventInList.time}</CardSubtitle>\n                          <CardText className='text-light'>Host : {eventInList.host.username}</CardText>\n                          <CardText className='text-light'>Location:{eventInList.location}<br/>What to expect:{eventInList.description}</CardText>\n                          <CardText className=\"text-light\">Capacity: {eventInList.guests.length}/{eventInList.max_number}</CardText>\n                          <Row className=\"align-items-center\">\n                            <Col md=\"8\">\n                              <Progress color=\"success\" value={Math.floor(eventInList.guests.length/eventInList.max_number*100)} />\n                            </Col>\n                            <Col md=\"4\">\n                            {eventInList.guests.includes(this.props.current_user.id)\n                               ?\n                                <Button id={eventInList.id} color=\"danger\" onClick={this.handleJoin}>Leave</Button>\n                              :\n                                <Button id={eventInList.id} color=\"success\" onClick={this.handleJoin}>Join</Button>\n                            }\n                            </Col>\n                          </Row>\n                        </CardBody>\n                      </Col>\n                    </Row>\n                </Container>)\n            })\n\n          }\n\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default EventFeed;"]},"metadata":{},"sourceType":"module"}